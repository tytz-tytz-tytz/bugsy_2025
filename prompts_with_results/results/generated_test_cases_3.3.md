### Тестовые сценарии

---

#### **1. Редактирование заблокировано при активной рассылке**  
**Цель:** Проверить запрет редактирования события, если связанная рассылка активна.  
**Предпосылки:** Событие связано с рассылкой в состоянии «Включена в активном режиме».  
**Шаги:**  
1. Открыть страницу редактирования события.  
2. Попытаться изменить имя события.  
**Ожидаемый результат:** Все поля события заблокированы, изменения невозможны.  

---

#### **2. Редактирование заблокировано при пассивной рассылке**  
**Цель:** Проверить запрет редактирования события, если связанная рассылка в пассивном режиме.  
**Предпосылки:** Событие связано с рассылкой в состоянии «Включена в пассивном режиме».  
**Шаги:**  
1. Открыть страницу редактирования события.  
2. Попытаться изменить идентификатор события.  
**Ожидаемый результат:** Интерфейс блокирует редактирование, отображается уведомление о наличии активных рассылок.  

---

#### **3. Ошибка при изменении идентификатора аргумента, используемого в макросах**  
**Цель:** Проверить блокировку изменения идентификатора аргумента, связанного с макросами.  
**Предпосылки:** Аргумент используется в макросах рассылки.  
**Шаги:**  
1. На странице события выбрать аргумент, используемый в макросе.  
2. Попытаться изменить его идентификатор.  
**Ожидаемый результат:** Появление ошибки: «Идентификатор аргумента используется в макросах. Изменение запрещено».  

---

#### **4. Удаление неиспользуемого аргумента**  
**Цель:** Проверить возможность удаления аргумента, не связанного с макросами.  
**Предпосылки:** Аргумент не используется в рассылках.  
**Шаги:**  
1. На странице события выбрать аргумент.  
2. Нажать «Удалить аргумент».  
**Ожидаемый результат:** Аргумент удаляется из списка, интерфейс обновляется.  

---

#### **5. Изменение названия аргумента, используемого в макросах**  
**Цель:** Проверить возможность редактирования названия аргумента, даже если он используется.  
**Предпосылки:** Аргумент используется в макросах.  
**Шаги:**  
1. На странице события изменить название аргумента.  
2. Перейти в связанную рассылку.  
**Ожидаемый результат:** Новое название аргумента отображается в макросах рассылки.  

---

#### **6. Валидация числового типа аргумента**  
**Цель:** Проверить блокировку ввода нечисловых значений для аргумента типа `decimal`.  
**Шаги:**  
1. Сгенерировать тестовое событие.  
2. В поле аргумента `decimal` ввести текст.  
**Ожидаемый результат:** Поле не принимает ввод, отображается ошибка «Некорректное значение».  

---

#### **7. Автоматическое сохранение имени события**  
**Цель:** Проверить мгновенное применение изменений без кнопок сохранения.  
**Шаги:**  
1. Открыть страницу события.  
2. Изменить имя события.  
3. Обновить страницу.  
**Ожидаемый результат:** Новое имя сохраняется без дополнительных действий.  

---

#### **8. Блокировка изменения типа аргумента**  
**Цель:** Проверить невозможность изменения типа аргумента после создания.  
**Шаги:**  
1. Открыть аргумент типа `date`.  
2. Попытаться изменить тип на `string`.  
**Ожидаемый результат:** Поле «Тип аргумента» недоступно для редактирования.  

---

#### **9. Отображение списка связанных рассылок**  
**Цель:** Проверить информирование о связанных рассылках и их статусах.  
**Предпосылки:** Событие используется в двух рассылках (активной и отключенной).  
**Шаги:**  
1. Открыть страницу события.  
**Ожидаемый результат:** В разделе «Связанные рассылки» отображается: «2 рассылки (1 активная, 1 отключена)».  

---

#### **10. Конфликт параллельного редактирования**  
**Цель:** Проверить обработку конфликта при одновременном редактировании.  
**Шаги:**  
1. Пользователь А изменяет имя события.  
2. Пользователь Б одновременно изменяет описание события.  
**Ожидаемый результат:** Интерфейс пользователя Б отображает ошибку: «Изменения конфликтуют с правками другого пользователя».  

---

#### **11. Ошибка дублирования идентификатора события**  
**Цель:** Проверить валидацию уникальности идентификатора.  
**Предпосылки:** Существует событие с идентификатором `order_created`.  
**Шаги:**  
1. Изменить идентификатор текущего события на `order_created`.  
**Ожидаемый результат:** Появление ошибки: «Идентификатор должен быть уникальным».  

---

#### **12. Предупреждение о влиянии на рассылки**  
**Цель:** Проверить отображение предупреждения при изменении имени события.  
**Предпосылки:** Событие связано с рассылкой.  
**Шаги:**  
1. Изменить имя события.  
**Ожидаемый результат:** Появление уведомления: «Изменение повлияет на 3 связанные рассылки».  

---

#### **13. Валидация спецсимволов в идентификаторе**  
**Цель:** Проверить запрет использования спецсимволов в идентификаторе.  
**Шаги:**  
1. Создать событие с идентификатором `event#1`.  
**Ожидаемый результат:** Ошибка: «Идентификатор может содержать только буквы, цифры и подчеркивания».  

---

#### **14. Откат изменений при ошибке сервера**  
**Цель:** Проверить обработку ошибки 409 Conflict.  
**Шаги:**  
1. Ввести некорректное значение аргумента (например, `abc` для `decimal`).  
2. Нажать «Сгенерировать событие».  
**Ожидаемый результат:** Значение сбрасывается к предыдущему, отображается ошибка: «Некорректный тип аргумента».  

---

#### **15. Запрет удаления события с активными рассылками**  
**Цель:** Проверить блокировку удаления события, связанного с активной рассылкой.  
**Предпосылки:** Событие связано с рассылкой в состоянии «Включена в активном режиме».  
**Шаги:**  
1. Нажать «Удалить событие».  
**Ожидаемый результат:** Появление ошибки: «Невозможно удалить событие, так как оно используется в активных рассылках».  

--- 

Каждый сценарий проверяет конкретный аспект, опираясь на требования документации и ограничения интерфейса.