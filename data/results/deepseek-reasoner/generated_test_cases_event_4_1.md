**Тест №1: Редактирование события с активной рассылкой**  
**Предусловия**: Событие связано с рассылкой в состоянии «Включена в активном режиме».  
**Действия**:  
1. Открыть страницу редактирования события.  
**Ожидаемый результат**: Все поля формы заблокированы (readonly), отсутствуют кнопки удаления/добавления аргументов.  

---

**Тест №2: Изменение названия аргумента, используемого в макросе**  
**Предусловия**: Аргумент «discount» используется в макросах рассылки, привязанной к событию.  
**Действия**:  
1. Ввести новое название аргумента «client_discount».  
2. Сохранить изменения.  
**Ожидаемый результат**: Название аргумента обновляется. В интерфейсе рассылки макрос автоматически переименовывается на {{client_discount}}.  

---

**Тест №3: Попытка изменить тип аргумента, используемого в макросе**  
**Предусловия**: Аргумент «code» (тип string) используется в макросах рассылки.  
**Действия**:  
1. Изменить тип аргумента на «decimal».  
**Ожидаемый результат**: Появляется ошибка: «Невозможно изменить тип аргумента, используемого в рассылках». Поле выбора типа заблокировано.  

---

**Тест №4: Ввод некорректного значения для аргумента типа decimal**  
**Предусловия**: Событие содержит аргумент «price» (тип decimal).  
**Действия**:  
1. В поле ввода аргумента ввести «12.5$».  
**Ожидаемый результат**: Поле подсвечивается красным, появляется сообщение «Допустимы только числовые значения».  

---

**Тест №5: Удаление аргумента, не связанного с макросами**  
**Предусловия**: Аргумент «comment» не используется в рассылках.  
**Действия**:  
1. Нажать «Удалить аргумент comment».  
**Ожидаемый результат**: Аргумент удаляется из списка.  

---

**Тест №6: Попытка сохранить событие с пустым идентификатором**  
**Предусловия**: Открыта форма редактирования события.  
**Действия**:  
1. Очистить поле «Идентификатор события».  
**Ожидаемый результат**: Поле подсвечивается красным, кнопка сохранения неактивна.  

---

**Тест №7: Редактирование события при потере соединения**  
**Предусловия**: Сеть отключена.  
**Действия**:  
1. Изменить название события.  
2. Попытаться сохранить.  
**Ожидаемый результат**: Появляется сообщение «Ошибка соединения. Изменения не сохранены».  

---

**Тест №8: Добавление аргумента с существующим идентификатором**  
**Предусловия**: Событие содержит аргумент «user_id».  
**Действия**:  
1. Добавить новый аргумент с идентификатором «user_id».  
**Ожидаемый результат**: Появляется ошибка «Идентификатор должен быть уникальным».  

---

**Тест №9: Изменение типа аргумента с categorical на boolean**  
**Предусловия**: Аргумент «status» (categorical: active/inactive) не используется в рассылках.  
**Действия**:  
1. Изменить тип на «boolean».  
**Ожидаемый результат**: Тип успешно изменен. В интерфейсе генерации события отображается чекбокс.  

---

**Тест №10: Попытка ввести дату вручную для аргумента типа date**  
**Предусловия**: Аргумент «expiration_date» (тип date).  
**Действия**:  
1. Попытаться ввести дату в текстовое поле в формате «31.12.2023».  
**Ожидаемый результат**: Поле не принимает ручной ввод, доступен только выбор из календаря.  

---

**Тест №11: Граничное значение для числового аргумента**  
**Предусловия**: Аргумент «quantity» (decimal, диапазон 1-100).  
**Действия**:  
1. Ввести значение «0».  
2. Ввести значение «101».  
**Ожидаемый результат**: Оба случая вызывают ошибку валидации.  

---

**Тест №12: Редактирование события с зависимыми рассылками в пассивном режиме**  
**Предусловия**: Рассылка в состоянии «Включена в пассивном режиме».  
**Действия**:  
1. Изменить идентификатор события.  
**Ожидаемый результат**: Изменения сохраняются. В списке рассылок отображается обновленный идентификатор.  

---

**Тест №13: Использование запрещенных символов в идентификаторе**  
**Предусловия**: Открыта форма редактирования.  
**Действия**:  
1. Ввести идентификатор «event#123».  
**Ожидаемый результат**: Поле подсвечивается, сообщение «Допустимы только латинские буквы, цифры и подчеркивание».  

---

**Тест №14: Автоматическое обновление макросов при переименовании аргумента**  
**Предусловия**: Аргумент «code» используется в макросах трех рассылок.  
**Действия**:  
1. Переименовать аргумент в «promo_code».  
**Ожидаемый результат**: Во всех связанных рассылках макросы автоматически заменяются на {{promo_code}}.  

---

**Тест №15: Блокировка интерфейса при конфликте версий**  
**Предусловия**: Событие было изменено в другом сеансе.  
**Действия**:  
1. Попытаться сохранить изменения.  
**Ожидаемый результат**: Появляется сообщение «Обновите данные. Версия события устарела».  

---

**Тест №16: Валидация обязательных полей при добавлении аргумента**  
**Действия**:  
1. Нажать «Добавить аргумент».  
2. Оставить поля «Идентификатор» и «Тип» пустыми.  
**Ожидаемый результат**: Кнопка подтверждения добавления неактивна до заполнения обязательных полей.  

---

**Тест №17: Попытка удалить событие с неактивными рассылками**  
**Предусловия**: Событие связано с рассылкой в состоянии «Отключена».  
**Действия**:  
1. Нажать «Удалить событие».  
**Ожидаемый результат**: Удаление проходит успешно. Рассылки, ссылавшиеся на событие, переходят в состояние «Ошибка конфигурации».  

---

**Тест №18: Изменение порядка аргументов**  
**Предусловия**: Событие содержит аргументы «param1», «param2».  
**Действия**:  
1. Перетащить «param2» на позицию выше «param1».  
**Ожидаемый результат**: Порядок аргументов сохраняется. При генерации события последовательность полей соответствует новому порядку.  

---

**Тест №19: Ввод многострочного текста для строкового аргумента**  
**Предусловия**: Аргумент «description» (тип string).  
**Действия**:  
1. Ввести текст с переносами строк через 
.  
**Ожидаемый результат**: Значение сохраняется. При генерации через API переносы отображаются корректно.  

---

**Тест №20: Редактирование события после остановки всех рассылок**  
**Предусловия**: Все связанные рассылки переведены в состояние «Отключена».  
**Действия**:  
1. Удалить аргумент, ранее использовавшийся в макросах.  
**Ожидаемый результат**: Удаление запрещено с сообщением «Аргумент используется в исторических данных рассылок».