**Тест №1: Редактирование события с активными рассылками запрещено**  
**Предусловия**: Событие используется в рассылке в состоянии "Включена в активном режиме".  
**Действия**:  
1. Открыть страницу редактирования события.  
2. Попытаться изменить название, идентификатор или аргументы.  
**Ожидаемый результат**: Все поля заблокированы (readonly/disabled), кнопка "Сохранить" неактивна.  

---

**Тест №2: Валидация типа числового аргумента**  
**Предусловия**: Событие содержит аргумент типа "число" (например, discount).  
**Действия**:  
1. В режиме редактирования события изменить значение аргумента discount на строку "ten".  
2. Попытаться сохранить.  
**Ожидаемый результат**: Появляется ошибка "Неверный тип данных: ожидается число", сохранение блокируется.  

---

**Тест №3: Попытка удалить аргумент, используемый в макросе**  
**Предусловия**: Аргумент phone_number используется в тексте рассылки через макрос {{phone_number}}.  
**Действия**:  
1. В режиме редактирования события нажать "Удалить" у аргумента phone_number.  
2. Подтвердить удаление.  
**Ожидаемый результат**: Отображается ошибка "Аргумент используется в рассылке [ID_рассылки]. Удаление невозможно".  

---

**Тест №4: Граничный случай — длина названия события**  
**Предусловия**: Максимальная длина названия — 100 символов.  
**Действия**:  
1. Ввести название из 100 допустимых символов (латиница, кириллица, пробелы).  
2. Попытаться ввести 101-й символ.  
**Ожидаемый результат**:  
- Поле принимает 100 символов.  
- При попытке ввода 101-го символа поле блокирует ввод/отображает предупреждение.  

---

**Тест №5: Редактирование идентификатора события при неактивных рассылках**  
**Предусловия**: Событие привязано к рассылке в состоянии "Не запущена".  
**Действия**:  
1. Изменить идентификатор события.  
2. Сохранить изменения.  
**Ожидаемый результат**: Изменения сохраняются успешно.  

---

**Тест №6: Добавление аргумента с недопустимыми символами в имени**  
**Предусловия**: Имя аргумента должно содержать только буквы, цифры и подчеркивание.  
**Действия**:  
1. Добавить аргумент с именем "user@name".  
2. Попытаться сохранить.  
**Ожидаемый результат**: Ошибка валидации "Недопустимые символы в имени аргумента".  

---

**Тест №7: Поведение при потере соединения во время сохранения**  
**Действия**:  
1. Внести корректные изменения в событие.  
2. Симулировать отключение сети.  
3. Нажать "Сохранить".  
**Ожидаемый результат**: Отображается сообщение "Ошибка соединения. Изменения не сохранены", кнопка "Повторить" активна.  

---

**Тест №8: Изменение типа аргумента, не используемого в рассылках**  
**Предусловия**: Аргумент status (тип: строка) не используется в макросах.  
**Действия**:  
1. Изменить тип аргумента на "булево".  
2. Сохранить изменения.  
**Ожидаемый результат**: Изменения применяются без ошибок.  

---

**Тест №9: Попытка ввести отрицательное значение для числового аргумента**  
**Предусловия**: Аргумент count имеет ограничение "≥0".  
**Действия**:  
1. Установить значение -5.  
2. Попытаться сохранить.  
**Ожидаемый результат**: Ошибка "Значение не может быть отрицательным", сохранение заблокировано.  

---

**Тест №10: Редактирование названия аргумента, используемого в макросе**  
**Предусловия**: Аргумент old_name используется в рассылке через макрос {{old_name}}.  
**Действия**:  
1. Изменить название аргумента на new_name.  
2. Сохранить изменения.  
**Ожидаемый результат**:  
- Аргумент переименован в new_name.  
- Макрос в рассылке автоматически обновляется до {{new_name}}.  

---

**Тест №11: Удаление события, связанного с отключенной рассылкой**  
**Предусловия**: Событие привязано к рассылке в состоянии "Отключена".  
**Действия**:  
1. Нажать "Удалить событие".  
2. Подтвердить действие.  
**Ожидаемый результат**: Событие удаляется успешно.  

---

**Тест №12: Попытка оставить обязательные поля пустыми**  
**Предусловия**: Поля "Идентификатор" и "Название" обязательны для заполнения.  
**Действия**:  
1. Очистить поле "Идентификатор".  
2. Попытаться сохранить.  
**Ожидаемый результат**: Поле подсвечивается как ошибочное, кнопка "Сохранить" заблокирована.  

---

**Тест №13: Изменение типа аргумента с нарушением совместимости в макросах**  
**Предусловия**: Аргумент code (тип: строка) используется в макросе {{code}} в URL.  
**Действия**:  
1. Изменить тип аргумента на "число".  
2. Сохранить изменения.  
**Ожидаемый результат**: Ошибка "Аргумент используется как строка в рассылке [ID]. Изменение типа запрещено".  

---

**Тест №14: Добавление аргумента с существующим именем**  
**Действия**:  
1. Добавить аргумент с именем, совпадающим с существующим.  
2. Попытаться сохранить.  
**Ожидаемый результат**: Ошибка "Аргумент с таким именем уже существует".  

---

**Тест №15: Восстановление данных после отмены редактирования**  
**Действия**:  
1. Внести изменения в название и аргументы.  
2. Нажать "Отменить".  
3. Перезайти в редактирование.  
**Ожидаемый результат**: Отображаются исходные данные без изменений.  

---

**Тест №16: Редактирование события с аргументами разных типов**  
**Действия**:  
1. Добавить аргументы:  
   - str_arg (строка): "test"  
   - num_arg (число): 42  
   - bool_arg (булево): true  
2. Сохранить.  
3. Изменить значения на граничные: пустая строка, 0, false.  
**Ожидаемый результат**: Изменения сохраняются без ошибок (если типы соответствуют).  

---

**Тест №17: Блокировка кнопки "Сохранить" при невалидных данных**  
**Действия**:  
1. Ввести недопустимый идентификатор события (например, с пробелом).  
2. Попытаться перейти к следующему полю.  
**Ожидаемый результат**: Кнопка "Сохранить" неактивна, поле подсвечено как ошибочное.  

---

**Тест №18: Редактирование события, связанного с рассылкой в пассивном режиме**  
**Предусловия**: Рассылка в состоянии "Включена в пассивном режиме".  
**Действия**:  
1. Попытаться изменить аргументы события.  
**Ожидаемый результат**: Редактирование разрешено только для аргументов, не используемых в макросах.  

---

**Тест №19: Автоматическая валидация URL с макросами**  
**Предусловия**: Аргумент link используется в URL кнопки через {{link}}.  
**Действия**:  
1. Изменить тип аргумента link на "число".  
2. Попытаться сохранить.  
**Ожидаемый результат**: Ошибка "Аргумент используется как строка в URL. Изменение типа запрещено".  

---

**Тест №20: Массовое удаление неиспользуемых аргументов**  
**Предусловия**: Событие содержит 5 аргументов, ни один не используется в рассылках.  
**Действия**:  
1. Удалить все аргументы.  
2. Сохранить изменения.  
**Ожидаемый результат**: Все аргументы удалены, событие сохранено.