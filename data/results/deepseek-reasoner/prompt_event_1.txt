Ты — инженер по тестированию пользовательских интерфейсов. Работа ведётся в рамках интерфейса Marketer, где события используются как триггеры для запуска рассылок.

Твоя задача: 
Напиши набор тест-кейсов, проверяющих корректность редактирования существующего пользовательского события в интерфейсе Marketer.
Сформируй набор тест-кейсов, достаточный для полного покрытия следующих аспектов редактирования событий:
- Условия, при которых редактирование разрешено / запрещено;
- Разные типы аргументов (строковые, числовые, булевы и т.д.);
- Макросы, использующие аргументы;
- Позитивные, негативные и граничные сценарии;
- Ошибки сохранения, отсутствие соединения с сервером, пустые поля;
- Системные vs пользовательские события;
- Поведение при наличии активных рассылок;
- UI-функции: переключатели, валидация, реакции на ошибки.
Количество тестов не ограничено, но не должно быть избыточным. Покрытие важнее количества.

Цель тестирования:
Проверить frontend-логику интерфейса, включая:
- отображение данных;
- реакцию на действия пользователя (клики, ввод, переключения);
- валидацию данных;
- поведение при ошибках (некорректные данные, проблемы с сервером);
- взаимодействие с backend (отправка и получение данных);
- блокировку недопустимых операций.

Что протестировать: 
Сконцентрируйся на элементах управления и логике событий:
- изменение названия события;
- изменение идентификатора события;
- добавление/удаление аргументов;
- валидация типов и названий аргументов;
- ограничения при редактировании событий, связанных с активными рассылками;
- поведение при удалении аргументов, используемых в макросах;
- реакции интерфейса на попытки нарушить ограничения;
- поведение при редактировании событий, участвующих в запущенных рассылках.

Требования к тест-кейсам:
- Используй разнообразные элементы интерфейса, классы эквивалентности, позитивные, негативные и граничные случаи;
- Не включай тесты, связанные с визуальной стилизацией, адаптивностью, кроссбраузерностью и мультиязычностью;
- Включи тесты с граничными значениями, множественным выбором, конфликтами, валидацией, удалением блоков после связывания, отменой настроек, некорректными параметрами и пустыми полями.

Формат описания теста:
1. Тест № <N>: Название теста
2. Предусловия
3. Действия
4. Ожидаемый результат

Примеры тестовых кейсов на основе фрагментов документации:
---
Фрагмент документации: Редактирование и удаление аргументов события ограничено созданными в рассылке макросами. Если аргумент события не используется в рассылке, то его можно удалять и изменять. Если используется, то доступно только изменение названия аргумента.
Тест №1: Попытка удалить событие, связанное с рассылкой
Предусловия: Создано пользовательское событие, на которое настроена как минимум одна рассылка.
Действия:
1. Перейти в раздел «События».
2. Выбрать нужное событие.
3. Нажать кнопку «Удалить».
Ожидаемый результат: Появляется сообщение об ошибке с указанием номеров рассылок, в которых используется событие, удаление невозможно.

Фрагмент документации: Редактирование и удаление аргументов события ограничено созданными в рассылке макросами. Если аргумент события не используется в рассылке, то его можно удалять и изменять. Если используется, то доступно только изменение названия аргумента.
Тест №2: Разрешённое редактирование аргументов события, связанного с рассылкой
Предусловия: Событие с аргументами является стартом для рассылки, аргументы события не используются в рассылке.
Действия:
1. Перейти в редактирование события.
2. Изменить название одного из аргументов.
3. Изменить идентификатор одного из аргументов.
4. Изменить тип одного аргументов
Ожидаемый результат: Изменения сохраняются успешно. Данные обновляются.

Фрагмент документации: Редактирование и удаление аргументов события ограничено созданными в рассылке макросами. Если аргумент события не используется в рассылке, то его можно удалять и изменять. Если используется, то доступно только изменение названия аргумента.
Тест №3: Удаление аргумента, который не используется в рассылке
Предусловия: Существует рассылка, со стартом по событию, которое содержит аргумент service_type. Аргумент service_type не используется в рассылке.
Действия:
1. Перейти в редактирование события.
2. Удалить аргумент service_type.
3. Сохранить изменения.
Ожидаемый результат: Удаление проходит успешно. Аргумент исчезает из схемы события.

Фрагмент документации: Редактирование и удаление аргументов события ограничено созданными в рассылке макросами. Если аргумент события не используется в рассылке, то его можно удалять и изменять. Если используется, то доступно только изменение названия аргумента.
Тест №4: Попытка удалить аргумент, используемый в сообщении рассылки.
Предусловия: Существует рассылка, со стартом по событию, которое содержит phone_number. Аргумент phone_number используется в тексте сообщения рассылки через макрос {{phone_number}}.
Действия:
1. Перейти в редактирование события.
2. Нажать "Удалить аргумент phone_number".
3. Подтвердить удаление.
Ожидаемый результат: Появляется сообщение об ошибке, указывающем на то, что макрос используется в рассылке и его удаление невозможно. Удаление блокируется.
---

О продукте:
Marketer — интерфейс Maxbot для настройки и запуска клиентских рассылок через мессенджеры и SMS. Интерфейс включает инструменты автоматизации (например, генерация событий, фильтрация по аудитории, настройка сценариев).

Контекст для модели:
---
Ниже приведены фрагменты документации, описывающие поведение интерфейса в контексте событий. Используй их при генерации тестовых сценариев:

События могут являться триггером к началу рассылки для клиента. Это удобно для решения некоторых маркетинговых задач. Например, можно создать событие «Клиент воспользовался услугой» и генерировать его при оплате клиентом услуги. Получив информацию о событии, бот может запустить одну или несколько рассылок этому клиенту: контроль качества через несколько дней, повторное предложение услуги со скидкой через месяц и т. д.
События делятся на два типа:
1. Системные:
• Добавление нового клиента;
• Подтверждение номера телефона.
2. Пользовательские.

Системные события
Системные события генерируются, когда клиент отправляет сообщение боту в первый раз, либо подтверждает номер телефона. Их нельзя удалить или изменить. Важно! Системные события срабатывают для всех клиентов, которые подключились к боту или подтвердили номер телефона. При тестировании таких рассылок нужно быть очень аккуратным и учитывать, что эти события могут происходить одновременно у многих реальных клиентов. Тестирование таких рассылок лучше производить с использованием отдельного тестового события, и потом только переключать рассылку на начало по системным событиям. Иными словами, аудитория может оказаться шире, чем изначально кажется маркетологу. И рассылка будет затрагивать всех будущих клиентов, которые подключатся или подтвердят номер телефона. Соответственно, лучше проверить такую рассылку заранее на другом событии и уже потом переключиться на нужное.

Пользовательские события
Пользовательские события могут генерироваться из другой рассылки или с помощью специального вызова API.
Пользовательские события можно создавать и удалять из интерфейса консоли маркетолога.

При создании события задается его идентификатор, имя и аргументы. Идентификатор события используется при генерации события. Имя используется для отображения события в интерфейсе, например, при выборе события в условиях запуска рассылки.
Аргументы позволяют передавать дополнительную информацию при генерации события. Например, у системного события «Подтверждение номера телефона» есть аргумент phone_number — номер телефона, который подтвердил клиент.
При создании пользовательских событий в них может быть добавлено произвольное число аргументов. Например, для события «Клиент воспользовался услугой» можно добавить аргументы «Дата оказания услуги» и «Мастер, который оказывал услугу». Эти аргументы можно будет использовать в текстах сообщений, кнопках рассылки и других текстовых полях аналогично макросам. Таким образом, можно создавать персонифицированные для каждого клиента рассылки.

Редактирование событий
После создания пользовательского события маркетолог может произвольно редактировать все доступные поля и удалить его.
Если хотя бы одна рассылка настроена на старт по данному событию, то его удаление запрещено, редактирование названия и идентификатора рассылки разрешено. Редактирование и удаление аргументов события ограничено созданными в рассылке макросами. Если аргумент события не используется в рассылке, то его можно удалять и изменять. Если используется, то доступно только изменение названия аргумента.
Если хотя бы одна из рассылок, настроенных на старт по данному событию, запущена, то редактирование всех полей события и его аргументов запрещено.

Тестирование рассылок, запускаемых по событию
В интерфейсе консоли маркетолога предусмотрена возможность генерации событий в целях тестирования.
Для этого можно нажать кнопку «Сгенерировать событие» в разделе «События» напротив выбранного события или на странице самого события.
После генерации события с использованием интерфейса Marketer в области «Список launch_result_ids» отображаются специальные ссылки, позволяющие перейти к отладке рассылки.
При переходе по ссылке отображается интерфейс отладки, в котором применен фильтр по выбранному идентификатору запуска (launch_result_id).
Для передачи информации о запросе разработчикам компании, например, для интеграции с CRM, удобно использовать кнопки копирования запроса в формате curl.

При генерации событий при помощи интерфейса консоли маркетолога система не даст ввести значения аргументов, не соответствующие их типу. При генерации событий при помощи API-вызовов также выполняется проверка соответствия типов аргументов. Например, при вызове события с некорректным значением аргумента vip:
curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer Contoso_:eyJoXfDsaJkKrsGFH..." -d '{ "customer_messenger_id": 13561, "event_name": "numeric_code_for_client", "arguments": { "code": 133442, "discount": 15, "vip": "no" } }' "https://mailing-factory.dev.maxbot.ai/v1/event"
сервер вернет ответ с HTTP-статусом 409:
HTTP/2 409 { "detail": "Argument type error(boolean): no", "key": "argument_type" }

События, отложенные до подтверждения клиентом номера телефона
При генерации событий описанным выше запросом рассылка для указанного в ней клиента стартует сразу после получения запроса. Если клиента с таким идентификатором не найдено, то рассылка не будет запущена.
В некоторых случаях удобно иметь возможность отложить запуск рассылки для клиентов, которые еще не подключились к боту, и, соответственно, не имеют идентификатора. Например, когда компании выгодно подключать клиентов к боту для ведения дальнейшей коммуникации, и клиентам предлагается скидка, но только в том случае если они подключатся к боту и подтвердят в нем свой номер телефона.
В этом случае компания может сгенерировать отложенное событие, указав не идентификатор клиента, а его номер телефона. Бот будет ждать заданное время (ttl, англ. time to live; настройка в интерфейсе называется «Время ожидания подтверждения номера телефона» и задается в секундах), и если клиент за это время подтвердит свой номер телефона, то событие будет сгенерировано и рассылка для него начнется.
Если клиент с таким номером телефона уже есть, то он сразу получит рассылку, несмотря на приоритет мессенджеров (например, если по приоритету Facebook* первый, ВКонтакте второй, а Telegram* третий, но клиент не подтвердил номер в Facebook*, то рассылка уйдет во ВКонтакте. Среди мессенджеров, где телефон подтвержден, приоритет учитывается).

События, отложенные до подписки клиента в мессенджере
Клиенты всех поддерживаемых мессенджеров имеют возможность отписаться от получения сообщений от бота в мессенджере (не следует путать с отпиской от всех рассылок на уровне Maxbot). Это приводит к невозможности отправлять таким клиентам какие-либо сообщения.
В некоторых случаях может быть целесообразно подождать, пока клиент подпишется обратно. Например, когда клиенту предлагают присылать информацию о статусе сделанного заказа.
Для этого предназначен второй тип ожидания — ожидание подписки клиента в мессенджерах; это время также задается в секундах.

Примечание: Данный тип ожидания может быть задан как в запросе генерации отложенного события, так и в запросе генерации обычного события по идентификатору клиента. Для указания задержки используется параметр запроса unsubscribed_ttl (настройка в интерфейсе — «Время ожидания подписки в мессенджере»).
Если клиент подписывается в мессенджере в течение указанного времени, то для него начинается рассылка. Если не успевает, то рассылка не начинается, событие считается просроченным.
Примечание: Клиенту можно отправить SMS если он отписался от бота в мессенджере. Для этого нужно выставить флаг failback_to_sms (в интерфейсе флажок «Отправлять SMS, если мессенджеры не используются или клиент не подключен к ним») и задать параметр unsubscribed_ttl=0 (в интерфейсе в поле «Время ожидания подписки в мессенджере» задать 0). Если при этом задать параметр unsubscribed_ttl > 0, то бот начнет ожидание подписки в мессенджере, SMS рассылка не начнется.

Отправка рассылок по номеру телефона
В некоторых случаях неудобно генерировать событие указывая идентификатор клиента. Для таких случаев можно указать номер телефона, время ожидания подтверждения номера телефона = 0 и приоритет мессенджеров.
В этом случае бот запустит рассылку, настроенную на начало по указанному событию, для клиента с указанным номером телефона. Если клиент подтвердил свой номер в нескольких мессенджерах, то будет взят первый по заданному приоритету. Если нет клиентов, которые подтвердили указанный номер телефона, то рассылка не начнется ни для кого из клиентов.
Отправка рассылок по номеру телефона и отложенные события отличаются только параметром «Время ожидания подтверждения номера телефона». Внутренний механизм и запрос API-запрос одинаковы.
Примечание: При отправке SMS-рассылок флажок «Отправлять SMS если мессенджеры не используются или клиент не подключен к ним» должен быть установлен, поле «Время ожидания подтверждения номера телефона» должно быть установлено в 0, рассылка должна содержать SMS-блок.

Статусы событий
Часто вызывающей стороне нужно знать, чем закончилась генерация события: началась ли для клиента рассылка; если да, то какая, когда и т. д. Для этого предусмотрены статусы событий, которые можно получить, обработав ответ на запрос генерации событий.
При генерации событий в ответе на запрос возвращаются идентификаторы запусков (flow), или идентификаторы отложенных событий.
Если событие сгенерировано по идентификатору клиента или по номеру телефона, и клиент с указанным номером уже существует, то в ответе на запрос генерации события возвращается список launch_customer_ids с идентификаторами запусков рассылок.
Информацию по каждому запуску можно получить с помощью API-запроса.

Использование макросов
Макросы позволяют персонифицировать рассылки для клиентов. Например, можно создать рассылку, в тексте которой используются два макроса:
• customer_name — имя и отчество клиента;
• customer_discount — персональная скидка.
Далее можно использовать файл аудитории, в котором заданы значения для используемых макросов.
Каждому клиенту из аудитории рассылки можно задать свои значения, таким образом, сделав рассылку уникальной для каждого клиента.

Поля, в которых можно использовать макросы
Макросы можно использовать почти во всех текстовых полях конструктора рассылок:
• Тексты сообщений;
• Заголовки кнопок;
• URL для кнопок-ссылок;
• URL для медиа-контента;
• Сообщения при переводе в канал;
• Большинство полей настроек вызова внешней системы (кроме названий заголовков запроса и названий параметров запроса);
• Аргументы события при генерации событий;
• Все текстовые поля SMS-блока и настройки вызова внешней системы в SMS-блоке
• Многие текстовые поля других действий9.

Если рассылка начинается при возникновении события, то в рассылку можно добавлять только макросы, названия которых совпадают с именами аргументов события, по которому стартует рассылка. При попытке использовать другой макрос возникнет ошибка. При попытке удалить аргумент события, который используется в рассылке, возникнет ошибка. При попытке сменить событие, по которому запускается рассылка, требуется чтобы у нового события были все аргументы, которые используются в рассылке.

Определение значений макросов для клиентов
Для рассылок со статической аудиторией значения макросов задаются в JSON или CSV-файлах, определяющих аудиторию рассылки.
Для рассылок, начинающихся по событию, значения макросов передаются в аргументах события. Например, если рассылка началась по событию «Создание промокода для клиента», то в теле рассылки могут быть использованы макросы {{code}}, {{discount}} и {{valid_thru}}.
---