**Тест №5: Редактирование события с активной рассылкой запрещено**  
**Предусловия**: Событие связано с рассылкой в состоянии «Включена в активном режиме».  
**Действия**:  
1. Перейти в редактирование события.  
2. Попытаться изменить название события.  
**Ожидаемый результат**: Все поля редактирования заблокированы (disabled). Отображается сообщение: «Редактирование недоступно для событий, связанных с активными рассылками».

---

**Тест №6: Валидация числового аргумента при редактировании**  
**Предусловия**: Событие содержит аргумент типа «число» (например, discount).  
**Действия**:  
1. Перейти в редактирование события.  
2. В поле значения аргумента discount ввести строку «ten».  
3. Нажать «Сохранить».  
**Ожидаемый результат**: Появляется ошибка: «Недопустимый тип данных для аргумента discount. Ожидается число».

---

**Тест №7: Редактирование аргумента, используемого в макросах рассылки**  
**Предусловия**: Аргумент phone_number используется в макросах рассылки в состоянии «Не запущена».  
**Действия**:  
1. Перейти в редактирование события.  
2. Изменить тип аргумента phone_number с «строка» на «число».  
3. Попытаться сохранить изменения.  
**Ожидаемый результат**: Ошибка: «Тип аргумента нельзя изменить, так как он используется в рассылке [ID]». Изменения не сохраняются.

---

**Тест №8: Граничный случай — максимальная длина названия события**  
**Предусловия**: Создано событие с названием длиной 254 символа.  
**Действия**:  
1. Перейти в редактирование события.  
2. Добавить один символ к названию.  
3. Сохранить изменения.  
**Ожидаемый результат**: Сохранение успешно. Название обрезается до 255 символов (если ограничение задано на уровне интерфейса).

---

**Тест №9: Попытка удалить событие с рассылкой в пассивном режиме**  
**Предусловия**: Событие связано с рассылкой в состоянии «Включена в пассивном режиме».  
**Действия**:  
1. Перейти в раздел «События».  
2. Выбрать событие и нажать «Удалить».  
**Ожидаемый результат**: Ошибка: «Событие используется в рассылках [ID]. Удаление невозможно».

---

**Тест №10: Реакция на потерю соединения при сохранении**  
**Предусловия**: Событие не связано с рассылками.  
**Действия**:  
1. Изменить название события.  
2. Эмулировать потерю сети.  
3. Нажать «Сохранить».  
**Ожидаемый результат**: Отображается сообщение: «Ошибка соединения. Изменения не сохранены». Кнопка «Повторить» активна.

---

**Тест №11: Добавление нового аргумента с валидным типом**  
**Предусловия**: Событие разрешает редактирование аргументов.  
**Действия**:  
1. Добавить новый аргумент с типом «boolean».  
2. Указать название «is_vip».  
3. Сохранить изменения.  
**Ожидаемый результат**: Аргумент отображается в списке с типом «boolean». Данные сохранены.

---

**Тест №12: Блокировка кнопки сохранения при пустом идентификаторе**  
**Предусловия**: Пользователь редактирует идентификатор события.  
**Действия**:  
1. Очистить поле «Идентификатор события».  
2. Попытаться сохранить изменения.  
**Ожидаемый результат**: Кнопка «Сохранить» заблокирована (disabled). Поле подсвечено красным с текстом: «Поле обязательно для заполнения».

---

**Тест №13: Запрет ручного ввода в выпадающий список типов аргументов**  
**Предусловия**: Редактирование аргумента события.  
**Действия**:  
1. В поле «Тип аргумента» вручную ввести «дата».  
2. Попытаться сохранить.  
**Ожидаемый результат**: Ввод невозможен. Доступны только варианты из выпадающего списка (строка, число, boolean).

---

**Тест №14: Конфликт при изменении идентификатора события**  
**Предусловия**: Существует другое событие с идентификатором «promo_2024».  
**Действия**:  
1. Изменить идентификатор текущего события на «promo_2024».  
2. Сохранить.  
**Ожидаемый результат**: Ошибка: «Идентификатор promo_2024 уже существует». Изменения отклонены.

---

**Тест №15: Редактирование аргумента, не связанного с рассылкой**  
**Предусловия**: Аргумент «comment» не используется в макросах.  
**Действия**:  
1. Удалить аргумент «comment».  
2. Изменить тип другого аргумента с «строка» на «число».  
3. Сохранить.  
**Ожидаемый результат**: Изменения применены успешно. Данные обновлены в интерфейсе.

---

**Тест №16: Попытка ввода запрещённых символов в идентификатор**  
**Действия**:  
1. В поле «Идентификатор события» ввести «event@name!».  
2. Сохранить.  
**Ожидаемый результат**: Ошибка: «Идентификатор может содержать только буквы, цифры и нижние подчёркивания».

---

**Тест №17: Восстановление формы после отмены редактирования**  
**Действия**:  
1. Изменить название события.  
2. Нажать «Отменить».  
3. Повторно открыть форму редактирования.  
**Ожидаемый результат**: Отображаются исходные данные. Изменения не сохранены.

---

**Тест №18: Редактирование события с аргументом-макросом в граничных условиях**  
**Предусловия**: Аргумент «code» (тип «число») используется в рассылке.  
**Действия**:  
1. Изменить название аргумента на «promo_code».  
2. Попытаться изменить минимальное значение на -1.  
**Ожидаемый результат**: Название изменено успешно. Ошибка: «Минимальное значение не может быть меньше 0» для поля «Минимум».

---

**Тест №19: Скрытие кнопки удаления аргумента, используемого в макросах**  
**Предусловия**: Аргумент «email» используется в рассылке.  
**Действия**:  
1. Перейти в редактирование события.  
2. Найти аргумент «email» в списке.  
**Ожидаемый результат**: Кнопка «Удалить» для аргумента «email» скрыта или заблокирована.

---

**Тест №20: Сохранение события после исправления ошибок валидации**  
**Предусловия**: В поле «Название события» введена пустая строка.  
**Действия**:  
1. Ввести корректное название.  
2. Сохранить.  
**Ожидаемый результат**: Кнопка «Сохранить» разблокирована. Данные успешно сохранены.