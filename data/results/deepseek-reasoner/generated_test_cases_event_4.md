**Тест №1: Редактирование события с активной рассылкой**  
**Предусловия**: Событие связано с рассылкой в состоянии «Включена в активном режиме».  
**Действия**:  
1. Открыть страницу редактирования события.  
2. Попытаться изменить название события.  
3. Попытаться добавить новый аргумент.  
**Ожидаемый результат**: Все поля редактирования заблокированы (disabled). Появление уведомления: «Редактирование недоступно для событий с активными рассылками».

---

**Тест №2: Изменение типа аргумента с числового на строковый**  
**Предусловия**: Событие содержит аргумент типа decimal, не используемый в рассылках.  
**Действия**:  
1. В редакторе аргументов изменить тип с decimal на string.  
2. Ввести значение "abc" при тестовой генерации события.  
**Ожидаемый результат**:  
- В интерфейсе редактирования: выпадающий список типов доступен.  
- При генерации: ввод строки разрешён, ошибок валидации нет.

---

**Тест №3: Попытка удалить аргумент, используемый в макросе**  
**Предусловия**: Аргумент "discount" типа decimal используется в макросе {{discount}} рассылки в состоянии «Не запущена».  
**Действия**:  
1. В редакторе события нажать "Удалить" у аргумента discount.  
**Ожидаемый результат**:  
- Кнопка удаления неактивна (disabled) или появляется ошибка: «Аргумент используется в рассылке [ID]».  
- Аргумент остаётся в списке.

---

**Тест №4: Ввод граничных значений для числового аргумента**  
**Предусловия**: Аргумент "attempts" типа decimal с ограничениями min=0, max=100.  
**Действия**:  
1. Ввести значение -1.  
2. Ввести значение 100.1.  
3. Ввести значение 50.  
**Ожидаемый результат**:  
- Шаги 1-2: Поле подсвечивается красным, кнопка генерации события заблокирована.  
- Шаг 3: Ввод разрешён, ошибок нет.

---

**Тест №5: Редактирование идентификатора события с макросами**  
**Предусловия**: Событие с ID "promo_2023" используется в рассылке через макрос {{promo_2023.code}}.  
**Действия**:  
1. Изменить ID события на "promo_2024".  
2. Запустить тестовую генерацию события.  
**Ожидаемый результат**:  
- В рассылке появляется ошибка: «Макрос {{promo_2023.code}} не найден».  
- Новые макросы должны использовать обновлённый ID.

---

**Тест №6: Отмена изменений при потере соединения**  
**Предусловия**: Событие без активных рассылок открыто для редактирования.  
**Действия**:  
1. Изменить название события.  
2. Эмулировать отключение сети.  
3. Перезагрузить страницу.  
**Ожидаемый результат**: Изменения не сохраняются, отображается оригинальное название события.

---

**Тест №7: Добавление аргумента с недопустимыми символами**  
**Предусловия**: Событие в режиме редактирования.  
**Действия**:  
1. Добавить аргумент с идентификатором "user@name".  
2. Добавить аргумент с идентификатором "user_name2".  
**Ожидаемый результат**:  
- Шаг 1: Ошибка валидации «Недопустимые символы».  
- Шаг 2: Аргумент создан успешно.

---

**Тест №8: Редактирование categorical-аргумента**  
**Предусловия**: Аргумент "status" типа categorical с допустимыми значениями ["new", "active"].  
**Действия**:  
1. Добавить значение "expired".  
2. Удалить значение "new".  
**Ожидаемый результат**:  
- Выпадающий список при генерации события содержит обновлённые значения.  
- Рассылки с макросом {{status}} продолжают работать с новым набором.

---

**Тест №9: Попытка ввода даты вручную**  
**Предусловия**: Аргумент "expiry_date" типа date.  
**Действия**:  
1. В поле ввода даты ввести "2023-13-32".  
2. Выбрать дату через календарь.  
**Ожидаемый результат**:  
- Шаг 1: Поле подсвечивается красным, кнопка генерации заблокирована.  
- Шаг 2: Валидное значение принято.

---

**Тест №10: Удаление события с неактивными рассылками**  
**Предусловия**: Событие связано с рассылкой в состоянии «Отключена».  
**Действия**:  
1. Нажать "Удалить событие".  
**Ожидаемый результат**: Удаление успешно. Рассылка переходит в состояние «Ошибка: связанное событие удалено».

---

**Тест №11: Изменение имени аргумента, используемого в макросе**  
**Предусловия**: Аргумент "code" используется в макросе {{code}} рассылки.  
**Действия**:  
1. Переименовать аргумент в "promo_code".  
**Ожидаемый результат**:  
- В интерфейсе рассылки макрос автоматически обновляется до {{promo_code}}.  
- Тестовая генерация события с "promo_code" работает корректно.

---

**Тест №12: Параллельное редактирование аргументов**  
**Предусловия**: Два пользователя одновременно редактируют событие.  
**Действия**:  
1. Пользователь A удаляет аргумент "temp".  
2. Пользователь B изменяет тип аргумента "temp".  
**Ожидаемый результат**: Появление сообщения «Данные устарели. Обновите страницу» для пользователя B при попытке сохранить.

---

**Тест №13: Валидация обязательных полей**  
**Предусловия**: Поля "Идентификатор события" и "Имя события" пусты.  
**Действия**:  
1. Очистить поле "Идентификатор".  
2. Очистить поле "Имя".  
**Ожидаемый результат**:  
- Поля подсвечиваются красным.  
- Кнопки "Добавить аргумент"/"Генерировать событие" заблокированы.

---

**Тест №14: Использование зарезервированных идентификаторов**  
**Действия**:  
1. Создать событие с ID "system_event".  
**Ожидаемый результат**: Ошибка валидации «Идентификатор не может начинаться с system_».

---

**Тест №15: Максимальное количество аргументов**  
**Предусловия**: Лимит аргументов — 50.  
**Действия**:  
1. Добавить 50 аргументов.  
2. Попытаться добавить 51-й.  
**Ожидаемый результат**:  
- Шаг 1: Все аргументы добавлены.  
- Шаг 2: Кнопка "Добавить аргумент" неактивна.